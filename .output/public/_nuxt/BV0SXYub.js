import{r as n,A as v,e as z,c as u,a as e,f as C,h as m,v as k,p as I,t as l,g as N,F as R,i as L,o as i,b as g,n as F}from"#entry";import{c as T}from"./CCcglbIy.js";/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=T("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=T("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Z={class:"p-4"},q={class:"flex gap-4 mt-2"},D={class:"flex gap-2 mt-2"},$={type:"submit",class:"bg-blue-500 text-white px-3 py-1 rounded"},j={key:0,class:"text-center py-4"},H={key:1,class:"w-full border-collapse border"},G={class:"border px-2 py-1"},J={class:"border px-2 py-1"},K={class:"border px-2 py-1"},O={class:"border px-2 py-1"},Q={class:"border px-2 py-1"},W={class:"border px-2 py-1"},X={class:"border px-2 py-1"},Y={class:"border px-2 py-1"},ee={class:"border px-2 py-1 flex gap-2"},te=["onClick"],ae=["onClick"],le={key:2,class:"mt-4 text-center"},de={__name:"products",setup(oe){const c=n(""),s=n(0),r=n(""),y=n([]),p=n(null),d=n(!1),f=v(()=>r.value==="vatable"?s.value:0),x=v(()=>r.value==="vatable"?s.value*.12:0),h=v(()=>r.value==="exempt"?s.value:0),_=v(()=>r.value==="zero"?s.value:0),w=v(()=>s.value+x.value);async function b(){d.value=!0;try{y.value=await window.productAPI.get(),console.log("Fetched products:",y.value)}catch(o){console.error("Error fetching products:",o),alert("Failed to fetch products.")}finally{d.value=!1}}function A(){p.value=null,c.value="",s.value=0,r.value=""}function V(o){p.value=o.id,c.value=o.productname,s.value=o.price,r.value=o.vatType}function P(){A()}async function E(){d.value=!0;const o={productname:c.value,price:s.value,vatType:r.value,vatSales:f.value,vatAmount:x.value,vatExempt:h.value,zeroRated:_.value,total:w.value,image:null};try{p.value?(o.id=p.value,await window.productAPI.update(o)):await window.productAPI.add(o),A(),await b()}catch(t){console.error("Product save error:",t),alert("Failed to save product.")}finally{d.value=!1}}async function S(o){if(confirm("Are you sure you want to delete this product?")){d.value=!0;try{await window.productAPI.delete(o),await b()}catch(t){console.error("Product delete error:",t),alert("Failed to delete product.")}finally{d.value=!1}}}return z(b),(o,t)=>(i(),u("div",Z,[e("form",{onSubmit:N(E,["prevent"]),class:"mb-6 border rounded p-4 space-y-2"},[e("div",null,[t[3]||(t[3]=e("label",null,"Product Name",-1)),m(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>c.value=a),type:"text",class:"border rounded px-2 py-1 w-full",required:""},null,512),[[k,c.value]])]),e("div",null,[t[4]||(t[4]=e("label",null,"Price",-1)),m(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>s.value=a),type:"number",class:"border rounded px-2 py-1 w-full",required:""},null,512),[[k,s.value,void 0,{number:!0}]])]),e("div",null,[t[6]||(t[6]=e("label",null,"VAT Type",-1)),m(e("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>r.value=a),class:"border rounded px-2 py-1 w-full"},[...t[5]||(t[5]=[e("option",{value:""},"Select",-1),e("option",{value:"vatable"},"Vatable",-1),e("option",{value:"exempt"},"Exempt",-1),e("option",{value:"zero"},"Zero Rated",-1)])],512),[[I,r.value]])]),e("div",q,[e("div",null,"VAT Sales: "+l(f.value.toFixed(2)),1),e("div",null,"VAT Amount: "+l(x.value.toFixed(2)),1),e("div",null,"VAT Exempt: "+l(h.value.toFixed(2)),1),e("div",null,"Zero Rated: "+l(_.value.toFixed(2)),1),e("div",null,"Total: "+l(w.value.toFixed(2)),1)]),e("div",D,[e("button",$,l(p.value?"Update":"Add"),1),e("button",{type:"button",onClick:P,class:"bg-gray-300 px-3 py-1 rounded"},"Cancel")])],32),d.value?(i(),u("div",j,"Loading products...")):(i(),u("table",H,[t[7]||(t[7]=e("thead",null,[e("tr",{class:"bg-gray-100"},[e("th",{class:"border px-2 py-1"},"Name"),e("th",{class:"border px-2 py-1"},"Price"),e("th",{class:"border px-2 py-1"},"VAT Type"),e("th",{class:"border px-2 py-1"},"VAT Sales"),e("th",{class:"border px-2 py-1"},"VAT Amount"),e("th",{class:"border px-2 py-1"},"VAT Exempt"),e("th",{class:"border px-2 py-1"},"Zero Rated"),e("th",{class:"border px-2 py-1"},"Total"),e("th",{class:"border px-2 py-1"},"Actions")])],-1)),e("tbody",null,[(i(!0),u(R,null,L(y.value,a=>(i(),u("tr",{key:a.id},[e("td",G,l(a.productname),1),e("td",J,l(a.price.toFixed(2)),1),e("td",K,l(a.vatType),1),e("td",O,l(a.vatSales.toFixed(2)),1),e("td",Q,l(a.vatAmount.toFixed(2)),1),e("td",W,l(a.vatExempt.toFixed(2)),1),e("td",X,l(a.zeroRated.toFixed(2)),1),e("td",Y,l(a.total.toFixed(2)),1),e("td",ee,[e("button",{onClick:M=>V(a),class:"text-blue-500"},[g(F(U))],8,te),e("button",{onClick:M=>S(a.id),class:"text-red-500"},[g(F(B))],8,ae)])]))),128))])])),!d.value&&y.value.length===0?(i(),u("p",le,"No products found.")):C("",!0)]))}};export{de as default};
