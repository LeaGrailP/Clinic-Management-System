import{_ as C,r,e as V,c as d,a as e,f as x,F as k,i as U,g as w,h as o,v as a,s as N,o as u,t as i,y as M,z as W}from"./URJV-2WR.js";const q={class:"p-6 min-h-screen"},E={class:"bg-slate-50 dark:bg-slate-600 border border-gray-400 text-slate-800 dark:text-slate-100 p-4 rounded shadow"},_={class:"w-full"},$=["onClick","aria-expanded"],B={class:"px-5 py-3"},F={class:"px-5 py-3"},T={class:"px-5 py-3"},A={class:"px-5 py-3"},j={class:"px-5 py-3"},L={class:"px-5 py-3"},z={class:"px-5 py-3 flex gap-2"},J=["onClick"],O={class:"px-5 py-3 text-right text-slate-400"},R={class:"bg-slate-50 dark:bg-slate-800"},G={colspan:"8",class:"px-6 py-5"},H={class:"grid grid-cols-2 gap-4"},K={class:"font-medium"},Q={class:"font-medium"},X={class:"font-medium"},Y={key:0},Z={key:0,class:"fixed inset-0 flex items-center justify-center bg-slate-200 bg-opacity-50",role:"dialog","aria-modal":"true"},ee={class:"bg-slate-50 dark:bg-slate-600 text-slate-800 dark:text-slate-100 p-6 rounded-md shadow-md w-full max-w-3xl relative"},te={class:"col-span-3 flex items-center mt-2"},se={key:0,class:"col-span-3"},le=["required"],oe={class:"col-span-3 flex items-center mt-2"},ne={key:1,class:"col-span-3"},ae=["required"],ie={class:"col-span-3 mt-6 flex items-center space-x-4"},de={key:1,class:"fixed inset-0 bg-black/50 flex items-center justify-center"},ue={class:"bg-white p-6 rounded shadow w-80 relative"},re={class:"flex justify-end space-x-2"},pe={__name:"customer",setup(me){const m=r(!1),y={firstName:"",lastName:"",middleName:"",address:"",phone:"",businessStyle:"",tin:"",isSenior:!1,seniorId:"",isPWD:!1,pwdId:""},l=r({...y}),f=r([]),p=r(new Set),b=r(!1),g=r(null),v=r("");function h(n){g.value=n,v.value="",b.value=!0}async function D(){if(!/^[0-9]{6}$/.test(v.value))return alert("Master PIN must be 6 digits.");const n=await window.electron.invoke("secure-delete-patient",{id:g.value,pin:v.value});if(!n.success){alert(n.error);return}b.value=!1,await c()}async function c(){f.value=await window.electron.invoke("get-patients")}function I(n){p.value.has(n)?p.value.delete(n):p.value.add(n)}async function P(){try{await window.electron.invoke("add-patient",{...l.value}),await c(),l.value={...y},m.value=!1}catch(n){console.error("Error adding patient:",n)}}return V(c),(n,t)=>(u(),d("div",q,[e("button",{onClick:t[0]||(t[0]=s=>m.value=!0),class:"bg-sky-600 hover:bg-sky-700 text-slate-50 px-4 py-2 rounded mb-6"}," ADD NEW PATIENT "),e("div",E,[e("table",_,[t[20]||(t[20]=e("thead",{class:"bg-slate-400 border-gray-400"},[e("tr",null,[e("th",{class:"px-5 py-3 text-left font-medium"},"First Name"),e("th",{class:"px-5 py-3 text-left font-medium"},"Middle Name"),e("th",{class:"px-5 py-3 text-left font-medium"},"Last Name"),e("th",{class:"px-5 py-3 text-left font-medium"},"Phone"),e("th",{class:"px-5 py-3 text-left font-medium"},"Business Style"),e("th",{class:"px-5 py-3 text-left font-medium"},"TIN"),e("th",{class:"px-5 py-3 text-left font-medium"}),e("th",{class:"px-5 py-3"})])],-1)),e("tbody",null,[(u(!0),d(k,null,U(f.value,s=>(u(),d(k,{key:s.id},[e("tr",{class:"border-b hover:bg-sky-200 cursor-pointer transition",onClick:S=>I(s.id),"aria-expanded":p.value.has(s.id)},[e("td",B,i(s.firstName),1),e("td",F,i(s.middleName||"-"),1),e("td",T,i(s.lastName),1),e("td",A,i(s.phone),1),e("td",j,i(s.businessStyle||"-"),1),e("td",L,i(s.tin||"-"),1),e("td",z,[e("button",{onClick:w(S=>h(s.id),["stop"]),class:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700"},"Delete ",8,J)]),e("td",O,[e("span",{class:M(["inline-block transition-transform",{"rotate-180":p.value.has(s.id)}])}," ▼ ",2)])],8,$),o(e("tr",R,[e("td",G,[e("div",H,[e("div",null,[t[16]||(t[16]=e("p",{class:"text-sm"},"Address",-1)),e("p",K,i(s.address),1)]),e("div",null,[t[17]||(t[17]=e("p",{class:"text-sm"},"Senior ID",-1)),e("p",Q,i(s.isSenior?s.seniorId:"-"),1)]),e("div",null,[t[18]||(t[18]=e("p",{class:"text-sm"},"PWD ID",-1)),e("p",X,i(s.isPWD?s.pwdId:"-"),1)])])])],512),[[W,p.value.has(s.id)]])],64))),128)),f.value.length===0?(u(),d("tr",Y,[...t[19]||(t[19]=[e("td",{colspan:"8",class:"text-center py-6"},"No patient records yet.",-1)])])):x("",!0)])])]),m.value?(u(),d("div",Z,[e("div",ee,[e("button",{onClick:t[1]||(t[1]=s=>m.value=!1),class:"absolute top-3 right-3 text-gray-500 hover:text-gray-700"}," ✖ "),t[33]||(t[33]=e("h2",{class:"text-lg font-semibold mb-4"},"Add New Patient",-1)),e("form",{onSubmit:w(P,["prevent"]),class:"grid grid-cols-3 gap-4"},[e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium mb-1"},"First Name",-1)),o(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>l.value.firstName=s),type:"text",placeholder:"Michael",class:"input-field",required:""},null,512),[[a,l.value.firstName]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium mb-1"},"Last Name",-1)),o(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>l.value.lastName=s),type:"text",placeholder:"Johnson",class:"input-field",required:""},null,512),[[a,l.value.lastName]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium mb-1"},"Middle Name",-1)),o(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>l.value.middleName=s),type:"text",placeholder:"(Optional)",class:"input-field"},null,512),[[a,l.value.middleName]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium mb-1"},"Address",-1)),o(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>l.value.address=s),type:"text",placeholder:"Baguio City",class:"input-field",required:""},null,512),[[a,l.value.address]])]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium mb-1"},"Phone",-1)),o(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>l.value.phone=s),type:"text",placeholder:"09234567890",class:"input-field",required:""},null,512),[[a,l.value.phone]])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium mb-1"},"Business Style",-1)),o(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>l.value.businessStyle=s),type:"text",placeholder:"Retail",class:"input-field"},null,512),[[a,l.value.businessStyle]])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium mb-1"},"TIN",-1)),o(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>l.value.tin=s),type:"text",placeholder:"1234 1234 1234",class:"input-field"},null,512),[[a,l.value.tin]])]),e("div",te,[o(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>l.value.isSenior=s),type:"checkbox",id:"senior",class:"mr-2"},null,512),[[N,l.value.isSenior]]),t[28]||(t[28]=e("label",{for:"senior",class:"text-sm"},"Senior",-1))]),l.value.isSenior?(u(),d("div",se,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium mb-1"},"Senior ID Number",-1)),o(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>l.value.seniorId=s),type:"text",placeholder:"Enter Senior ID Number",required:l.value.isSenior,class:"input-field"},null,8,le),[[a,l.value.seniorId]])])):x("",!0),e("div",oe,[o(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>l.value.isPWD=s),type:"checkbox",id:"pwd",class:"mr-2"},null,512),[[N,l.value.isPWD]]),t[30]||(t[30]=e("label",{for:"pwd",class:"text-sm"},"PWD",-1))]),l.value.isPWD?(u(),d("div",ne,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium mb-1"},"PWD ID Number",-1)),o(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>l.value.pwdId=s),type:"text",placeholder:"Enter PWD ID Number",required:l.value.isPWD,class:"input-field"},null,8,ae),[[a,l.value.pwdId]])])):x("",!0),e("div",ie,[t[32]||(t[32]=e("button",{type:"submit",class:"bg-orange-400 hover:bg-orange-600 text-slate-50 px-4 py-2 rounded"}," Save Patient ",-1)),e("button",{type:"button",onClick:t[13]||(t[13]=s=>m.value=!1),class:"bg-sky-400 hover:bg-sky-600 text-slate-50 px-4 py-2 rounded"}," Cancel ")])],32)])])):x("",!0),b.value?(u(),d("div",de,[e("div",ue,[t[34]||(t[34]=e("h2",{class:"text-lg font-semibold mb-4"},"Enter Master PIN",-1)),o(e("input",{type:"password","onUpdate:modelValue":t[14]||(t[14]=s=>v.value=s),maxlength:"6",class:"input-field mb-4",placeholder:"6-digit PIN"},null,512),[[a,v.value]]),e("div",re,[e("button",{class:"px-3 py-2 bg-gray-400 text-white rounded",onClick:t[15]||(t[15]=s=>b.value=!1)}," Cancel "),e("button",{class:"px-3 py-2 bg-red-600 text-white rounded",onClick:D}," Confirm Delete ")])])])):x("",!0)]))}},xe=C(pe,[["__scopeId","data-v-0c6e719f"]]);export{xe as default};
