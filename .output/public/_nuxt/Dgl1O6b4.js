import{r,n as i,e as M,m as q,c as d,a as e,h as g,v as P,f as w,l as B,d as b,t as s,g as D,b as k,q as A,F as $,i as O,o as u}from"./D-sZCh44.js";import{c as T}from"./CS8xc2zq.js";/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=T("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=T("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=T("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),J={class:"p-6 mx-auto"},K={key:0,class:"mt-2"},Q=["src"],W={class:"mt-2 space-y-1"},X={class:"flex items-center gap-2 mt-4"},Y={class:"bg-white p-4 rounded shadow"},ee={class:"flex justify-between items-center mb-4"},te={class:"table-auto w-full border-collapse border border-gray-300 text-sm"},le={class:"border p-2"},oe=["src"],se={key:1,class:"text-gray-400 italic"},ae={class:"border p-2"},ne={class:"border p-2"},re={class:"border p-2"},de={class:"border p-2"},ue={class:"border p-2"},ie={class:"border p-2"},ce={class:"border p-2"},ve={class:"border p-2"},pe={class:"border p-2 space-x-2"},me=["onClick"],be=["onClick"],ye={key:0,class:"text-gray-500 text-sm mt-2"},ge={__name:"products",setup(xe){const c=r(""),a=r(0),n=r(""),x=r([]),v=r(null),p=r(null),m=r(null),C=q(),R=r(JSON.parse(localStorage.getItem("user")||'{"role":"cashier"}')),E=i(()=>R.value.role==="admin");M(()=>{E.value||(alert("Access denied. Admins only."),C.push("/"))});const _=i(()=>n.value==="vatable"?a.value:0),f=i(()=>n.value==="vatable"?a.value*.12:0),V=i(()=>n.value==="exempt"?a.value:0),N=i(()=>n.value==="zero"?a.value:0),S=i(()=>a.value+f.value);function L(o){const t=o.target.files[0];t&&(p.value=t,m.value=URL.createObjectURL(t))}async function y(){try{x.value=await window.electron.invoke("get-products")}catch(o){console.error("Error fetching products:",o)}}async function U(){let o=null;if(p.value){const l=await p.value.arrayBuffer(),h=`${Date.now()}_${p.value.name}`;o=await window.electron.invoke("save-product-image",{imageName:h,buffer:[...new Uint8Array(l)]})}const t={productname:c.value,price:a.value,vatType:n.value,vatSales:_.value,vatAmount:f.value,vatExempt:V.value,zeroRated:N.value,total:S.value,image:o};v.value?(t.id=v.value,await window.electron.invoke("update-product",t)):await window.electron.invoke("add-product",t),F(),y()}function z(o){v.value=o.id,c.value=o.productname,a.value=o.price,n.value=o.vatType,m.value=o.image}function I(){F()}function F(){v.value=null,c.value="",a.value=0,n.value="",p.value=null,m.value=null}async function j(o){confirm("Are you sure you want to delete this product?")&&(await window.electron.invoke("delete-product",o),y())}return M(y),(o,t)=>(u(),d("div",J,[t[16]||(t[16]=e("h1",{class:"text-2xl font-bold mb-6"},"PRODUCT MANAGER",-1)),e("form",{onSubmit:D(U,["prevent"]),class:"bg-white p-4 rounded shadow mb-6 space-y-4"},[e("div",null,[t[3]||(t[3]=e("label",{class:"block font-semibold"},"Product Name",-1)),g(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>c.value=l),class:"w-full border px-3 py-2 rounded",placeholder:"e.g. Services",required:""},null,512),[[P,c.value]])]),e("div",null,[t[4]||(t[4]=e("label",{class:"block font-semibold"},"Product Image",-1)),e("input",{type:"file",accept:"image/*",onChange:L,class:"w-full border px-3 py-2 rounded"},null,32),m.value?(u(),d("div",K,[e("img",{src:m.value,alt:"Preview",class:"w-20 h-20 object-cover rounded border"},null,8,Q)])):w("",!0)]),e("div",null,[t[5]||(t[5]=e("label",{class:"block font-semibold"},"Price",-1)),g(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>a.value=l),type:"number",step:"0.01",class:"w-full border px-3 py-2 rounded",required:""},null,512),[[P,a.value,void 0,{number:!0}]])]),e("div",null,[t[7]||(t[7]=e("label",{class:"block font-semibold"},"VAT Classification",-1)),g(e("select",{"onUpdate:modelValue":t[2]||(t[2]=l=>n.value=l),class:"w-full border px-3 py-2 rounded",required:""},t[6]||(t[6]=[e("option",{disabled:"",value:""},"-- Select VAT Type --",-1),e("option",{value:"vatable"},"VATable (12%)",-1),e("option",{value:"exempt"},"VAT-Exempt",-1),e("option",{value:"zero"},"Zero-Rated",-1)]),512),[[B,n.value]])]),e("div",W,[e("p",null,[t[8]||(t[8]=b("VAT Sales: ",-1)),e("strong",null,"₱"+s(_.value.toFixed(2)),1)]),e("p",null,[t[9]||(t[9]=b("VAT Amount: ",-1)),e("strong",null,"₱"+s(f.value.toFixed(2)),1)]),e("p",null,[t[10]||(t[10]=b("VAT-Exempt Sales: ",-1)),e("strong",null,"₱"+s(V.value.toFixed(2)),1)]),e("p",null,[t[11]||(t[11]=b("Zero-Rated Sales: ",-1)),e("strong",null,"₱"+s(N.value.toFixed(2)),1)]),e("p",null,[t[12]||(t[12]=b("Total Price: ",-1)),e("strong",null,"₱"+s(S.value.toFixed(2)),1)])]),e("div",X,[t[13]||(t[13]=e("button",{type:"submit",class:"bg-green-600 hover:bg-green-700 text-white font-semibold px-4 py-2 rounded"},"Save",-1)),v.value?(u(),d("button",{key:0,onClick:I,type:"button",class:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded"}," Cancel ")):w("",!0)])],32),e("div",Y,[e("div",ee,[t[14]||(t[14]=e("h2",{class:"text-xl font-bold"},"Product List",-1)),e("button",{onClick:y,class:"bg-blue-500 hover:bg-blue-600 text-white px-2 py-1 rounded text-sm"},[k(A(H),{class:"w-4 h-4"})])]),e("table",te,[t[15]||(t[15]=e("thead",null,[e("tr",{class:"bg-gray-100 text-left"},[e("th",{class:"border p-2"},"Image"),e("th",{class:"border p-2"},"Name"),e("th",{class:"border p-2"},"VAT Type"),e("th",{class:"border p-2"},"Price"),e("th",{class:"border p-2"},"VAT Sales"),e("th",{class:"border p-2"},"VAT Amount"),e("th",{class:"border p-2"},"VAT-Exempt"),e("th",{class:"border p-2"},"Zero-Rated"),e("th",{class:"border p-2"},"Total"),e("th",{class:"border p-2"},"Actions")])],-1)),e("tbody",null,[(u(!0),d($,null,O(x.value,l=>(u(),d("tr",{key:l.id},[e("td",le,[l.image?(u(),d("img",{key:0,src:l.image,class:"w-12 h-12 object-cover rounded"},null,8,oe)):(u(),d("span",se,"No Image"))]),e("td",ae,s(l.productname),1),e("td",ne,s(l.vatType),1),e("td",re,"₱"+s(Number(l.price||0).toFixed(2)),1),e("td",de,"₱"+s(Number(l.vatSales||0).toFixed(2)),1),e("td",ue,"₱"+s(Number(l.vatAmount||0).toFixed(2)),1),e("td",ie,"₱"+s(Number(l.vatExempt||0).toFixed(2)),1),e("td",ce,"₱"+s(Number(l.zeroRated||0).toFixed(2)),1),e("td",ve,"₱"+s(Number(l.total||0).toFixed(2)),1),e("td",pe,[e("button",{onClick:h=>z(l),class:"text-blue-600 hover:underline text-sm"},[k(A(Z),{class:"w-4 h-4"})],8,me),e("button",{onClick:h=>j(l.id),class:"text-red-600 hover:underline text-sm"},[k(A(G),{class:"w-4 h-4"})],8,be)])]))),128))])]),x.value.length===0?(u(),d("div",ye," No products found. ")):w("",!0)])]))}};export{ge as default};
