import{r,e as S,k as q,m as c,c as v,a as e,h,v as M,n as B,d as p,t as s,f as C,g as D,b as w,p as g,F as I,i as $,o as m}from"./BGyk4NGC.js";import{u as Z}from"./BqUikPGH.js";import{c as k}from"./DawSNPfT.js";/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=k("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=k("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=k("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),O={class:"p-6 max-w-3xl mx-auto"},J={class:"mt-2 space-y-1"},K={class:"flex items-center gap-2 mt-4"},Q={class:"bg-white p-4 rounded shadow"},W={class:"flex justify-between items-center mb-4"},X={class:"table-auto w-full border-collapse border border-gray-300 text-sm"},Y={class:"border p-2"},ee={class:"border p-2"},te={class:"border p-2"},le={class:"border p-2"},oe={class:"border p-2"},se={class:"border p-2"},ae={class:"border p-2"},ne={class:"border p-2"},re={class:"border p-2 space-x-2"},de=["onClick"],ue=["onClick"],ie={key:0,class:"text-gray-500 text-sm mt-2"},be={__name:"products",setup(ce){const d=r(""),a=r(0),n=r(""),x=r([]),u=r(null),i=r(null),E=q(),{isAdmin:P}=Z();S(()=>{P.value||(alert("Access denied. Admins only."),E.push("/"))});const A=c(()=>n.value==="vatable"?a.value:0),f=c(()=>n.value==="vatable"?a.value*.12:0),T=c(()=>n.value==="exempt"?a.value:0),V=c(()=>n.value==="zero"?a.value:0),F=c(()=>a.value+f.value);function _(o){const t=o.target.files[0];t&&(i.value=t)}async function b(){try{x.value=await window.electron.invoke("get-products")}catch(o){console.error("Error fetching products:",o)}}async function R(){let o=null;if(i.value){const l=await i.value.arrayBuffer(),y=`${Date.now()}_${i.value.name}`;o=await window.electron.invoke("save-product-image",{imageName:y,buffer:[...new Uint8Array(l)]})}const t={productname:d.value,price:a.value,vatType:n.value,vatSales:A.value,vatAmount:f.value,vatExempt:T.value,zeroRated:V.value,total:F.value,image:o};u.value?(t.id=u.value,await window.electron.invoke("update-product",t)):await window.electron.invoke("add-product",t),N(),b()}function z(o){u.value=o.id,d.value=o.productname,a.value=o.price,n.value=o.vatType}function U(){N()}function N(){u.value=null,d.value="",a.value=0,n.value="",i.value=null}async function L(o){confirm("Are you sure you want to delete this product?")&&(await window.electron.invoke("delete-product",o),b())}return S(b),(o,t)=>(m(),v("div",O,[t[16]||(t[16]=e("h1",{class:"text-2xl font-bold mb-6"},"PRODUCT MANAGER",-1)),e("form",{onSubmit:D(R,["prevent"]),class:"bg-white p-4 rounded shadow mb-6 space-y-4"},[e("div",null,[t[3]||(t[3]=e("label",{class:"block font-semibold"},"Product Name",-1)),h(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>d.value=l),class:"w-full border px-3 py-2 rounded",placeholder:"e.g. Services",required:""},null,512),[[M,d.value]])]),e("div",null,[t[4]||(t[4]=e("label",{class:"block font-semibold"},"Product Image",-1)),e("input",{type:"file",accept:"image/*",onChange:_,class:"w-full border px-3 py-2 rounded"},null,32)]),e("div",null,[t[5]||(t[5]=e("label",{class:"block font-semibold"},"Price",-1)),h(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>a.value=l),type:"number",step:"0.01",class:"w-full border px-3 py-2 rounded",required:""},null,512),[[M,a.value,void 0,{number:!0}]])]),e("div",null,[t[7]||(t[7]=e("label",{class:"block font-semibold"},"VAT Classification",-1)),h(e("select",{"onUpdate:modelValue":t[2]||(t[2]=l=>n.value=l),class:"w-full border px-3 py-2 rounded",required:""},t[6]||(t[6]=[e("option",{disabled:"",value:""},"-- Select VAT Type --",-1),e("option",{value:"vatable"},"VATable (12%)",-1),e("option",{value:"exempt"},"VAT-Exempt",-1),e("option",{value:"zero"},"Zero-Rated",-1)]),512),[[B,n.value]])]),e("div",J,[e("p",null,[t[8]||(t[8]=p("VAT Sales: ",-1)),e("strong",null,"₱"+s(A.value.toFixed(2)),1)]),e("p",null,[t[9]||(t[9]=p("VAT Amount: ",-1)),e("strong",null,"₱"+s(f.value.toFixed(2)),1)]),e("p",null,[t[10]||(t[10]=p("VAT-Exempt Sales: ",-1)),e("strong",null,"₱"+s(T.value.toFixed(2)),1)]),e("p",null,[t[11]||(t[11]=p("Zero-Rated Sales: ",-1)),e("strong",null,"₱"+s(V.value.toFixed(2)),1)]),e("p",null,[t[12]||(t[12]=p("Total Price: ",-1)),e("strong",null,"₱"+s(F.value.toFixed(2)),1)])]),e("div",K,[t[13]||(t[13]=e("button",{type:"submit",class:"bg-green-600 hover:bg-green-700 text-white font-semibold px-4 py-2 rounded"},"Save ",-1)),u.value?(m(),v("button",{key:0,onClick:U,type:"button",class:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded"}," Cancel ")):C("",!0)])],32),e("div",Q,[e("div",W,[t[14]||(t[14]=e("h2",{class:"text-xl font-bold"},"Product List",-1)),e("button",{onClick:b,class:"bg-blue-500 hover:bg-blue-600 text-white px-2 py-1 rounded text-sm"},[w(g(H),{class:"w-4 h-4"})])]),e("table",X,[t[15]||(t[15]=e("thead",null,[e("tr",{class:"bg-gray-100 text-left"},[e("th",{class:"border p-2"},"Name"),e("th",{class:"border p-2"},"VAT Type"),e("th",{class:"border p-2"},"Price"),e("th",{class:"border p-2"},"VAT Sales"),e("th",{class:"border p-2"},"VAT Amount"),e("th",{class:"border p-2"},"VAT-Exempt"),e("th",{class:"border p-2"},"Zero-Rated"),e("th",{class:"border p-2"},"Total"),e("th",{class:"border p-2"},"Actions")])],-1)),e("tbody",null,[(m(!0),v(I,null,$(x.value,l=>(m(),v("tr",{key:l.id},[e("td",Y,s(l.productname),1),e("td",ee,s(l.vatType),1),e("td",te,"₱"+s(Number(l.price||0).toFixed(2)),1),e("td",le,"₱"+s(Number(l.vatSales||0).toFixed(2)),1),e("td",oe,"₱"+s(Number(l.vatAmount||0).toFixed(2)),1),e("td",se,"₱"+s(Number(l.vatExempt||0).toFixed(2)),1),e("td",ae,"₱"+s(Number(l.zeroRated||0).toFixed(2)),1),e("td",ne,"₱"+s(Number(l.total||0).toFixed(2)),1),e("td",re,[e("button",{onClick:y=>z(l),class:"text-blue-600 hover:underline text-sm"},[w(g(j),{class:"w-4 h-4"})],8,de),e("button",{onClick:y=>L(l.id),class:"text-red-600 hover:underline text-sm"},[w(g(G),{class:"w-4 h-4"})],8,ue)])]))),128))])]),x.value.length===0?(m(),v("div",ie," No products found. ")):C("",!0)])]))}};export{be as default};
