import{r,n as x,e as y,c as u,a as t,d as i,t as m,g as w,h as p,v,m as k,o as d}from"./D-sZCh44.js";const S={class:"min-h-screen bg-gray-50 py-12 px-6"},h={class:"max-w-xl mx-auto bg-white shadow rounded-lg p-8"},N={key:0},_={class:"mb-4"},C={class:"mb-4"},D={class:"flex justify-between mt-6"},E={class:"mb-4"},M={class:"mb-4"},A={__name:"profile",setup(V){const s=r({role:null});x(()=>s.value.role==="admin"),y(()=>{const a=localStorage.getItem("user");if(a)try{const e=JSON.parse(a);e&&typeof e=="object"?s.value=e:s.value={role:e}}catch{s.value={role:a}}});const b=k(),o=r({name:"",password:""}),l=r(!1);function c(){if(o.value.name.trim()==="")return alert("Name required");s.value.name=o.value.name,localStorage.setItem("user",JSON.stringify(s.value)),l.value=!1,alert("Profile updated!")}function f(){o.value.name=s.value.name,o.value.password="",l.value=!1}function g(){confirm("Are you sure you want to delete your account?")&&(localStorage.removeItem("user"),alert("Account deleted."),b.push())}return(a,e)=>(d(),u("div",S,[t("div",h,[e[8]||(e[8]=t("h2",{class:"text-2xl font-bold mb-6 text-center"},"My Profile",-1)),l.value?(d(),u("form",{key:1,onSubmit:w(c,["prevent"])},[t("div",E,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium mb-1"},"Name",-1)),p(t("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>o.value.name=n),class:"w-full border px-3 py-2 rounded"},null,512),[[v,o.value.name]])]),t("div",M,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium mb-1"},"Password",-1)),p(t("input",{type:"password","onUpdate:modelValue":e[2]||(e[2]=n=>o.value.password=n),class:"w-full border px-3 py-2 rounded"},null,512),[[v,o.value.password]])]),t("div",{class:"flex justify-between mt-6"},[e[7]||(e[7]=t("button",{type:"submit",class:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600"}," Save ",-1)),t("button",{type:"button",onClick:f,class:"bg-gray-300 text-gray-800 px-4 py-2 rounded"}," Cancel ")])],32)):(d(),u("div",N,[t("p",_,[e[3]||(e[3]=t("strong",null,"Name:",-1)),i(" "+m(s.value.name),1)]),t("p",C,[e[4]||(e[4]=t("strong",null,"Role:",-1)),i(" "+m(s.value.role),1)]),t("div",D,[t("button",{onClick:e[0]||(e[0]=n=>l.value=!0),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"}," Edit "),t("button",{onClick:g,class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," Delete Account ")])]))])]))}};export{A as default};
