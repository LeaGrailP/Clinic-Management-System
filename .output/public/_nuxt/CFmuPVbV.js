import{_ as v,r as m,e as b,k as y,c as w,o as f,b as x,a as r,g as h,h as c,v as p,t as A,l as S,m as k}from"./D-sZCh44.js";import{u as _}from"./Cl_uQ4oE.js";const M={__name:"background",setup(g){const d=m(null);let a,o=[];const l=()=>{const s=d.value.getContext("2d"),i=window.innerWidth,u=window.innerHeight;d.value.width=i,d.value.height=u,o=Array.from({length:100},()=>({x:Math.random()*i,y:Math.random()*u,size:Math.random()*2+1,alpha:Math.random(),delta:Math.random()*.02+.005}));const t=()=>{s.clearRect(0,0,i,u);for(let e of o)e.alpha+=e.delta,(e.alpha>=1||e.alpha<=0)&&(e.delta*=-1),s.fillStyle=`rgba(255,255,255,${e.alpha})`,s.fillRect(e.x,e.y,e.size,e.size);a=requestAnimationFrame(t)};t()};return b(()=>{l(),window.addEventListener("resize",l)}),y(()=>{cancelAnimationFrame(a),window.removeEventListener("resize",l)}),(s,i)=>(f(),w("canvas",{ref_key:"canvas",ref:d,class:"fixed top-0 left-0 w-full h-full z-[-1]"},null,512))}},I=v(M,[["__scopeId","data-v-0cbee482"]]),z={class:"min-h-screen flex items-center justify-center"},L={class:"z-10 p-8 bg-white bg-opacity-10 backdrop-blur-md rounded-lg shadow-lg"},U={class:"text-2xl font-bold mb-6 text-center text-white"},C={__name:"index",setup(g){const d=k(),a=m(""),o=m(""),l=m("admin"),s=m(!1);b(async()=>{try{const t=await window.electronAPI.checkAdmin();s.value=!t}catch(t){console.error("Error checking admin:",t)}});async function i(){try{const t=await window.electronAPI.createAdmin({name:a.value,password:o.value});t&&t.success?(alert("Admin account created successfully!"),s.value=!1):alert(t?.error||"Failed to create admin.")}catch(t){console.error("Setup error:",t),alert("Something went wrong while setting up admin.")}}async function u(){try{const t=await window.electronAPI.login({role:l.value,name:a.value,password:o.value});if(t&&t.success){localStorage.setItem("token","true"),localStorage.setItem("name",t.name),localStorage.setItem("role",t.role);const e=_("user",()=>null);e.value={name:t.name,role:t.role},(t.role==="admin"||t.role==="cashier")&&d.push("/dashboard")}else alert(t?.error||"Login failed.")}catch(t){console.error("Login error:",t),alert("Something went wrong during login.")}}return(t,e)=>(f(),w("div",z,[x(I),r("div",L,[s.value?(f(),w("form",{key:0,onSubmit:h(i,["prevent"]),class:"p-8 rounded w-full max-w-sm"},[e[5]||(e[5]=r("h2",{class:"text-2xl font-bold mb-6 text-center text-white"}," Setup Admin Account ",-1)),c(r("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>a.value=n),type:"text",placeholder:"Admin Name",class:"w-full p-2 border border-gray-300 rounded mb-4",required:""},null,512),[[p,a.value]]),c(r("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>o.value=n),type:"password",placeholder:"Password",class:"w-full p-2 border border-gray-300 rounded mb-6",required:""},null,512),[[p,o.value]]),e[6]||(e[6]=r("button",{type:"submit",class:"w-full bg-green-500 text-white py-2 rounded hover:bg-green-600"}," Create Admin ",-1))],32)):(f(),w("form",{key:1,onSubmit:h(u,["prevent"]),class:"p-8 rounded w-full max-w-sm"},[r("h2",U,A(l.value.charAt(0).toUpperCase()+l.value.slice(1))+" Login ",1),c(r("select",{"onUpdate:modelValue":e[2]||(e[2]=n=>l.value=n),class:"w-full p-2 border border-gray-300 rounded mb-4 bg-white text-black"},e[7]||(e[7]=[r("option",{value:"admin"},"Admin",-1),r("option",{value:"cashier"},"Cashier",-1)]),512),[[S,l.value]]),c(r("input",{"onUpdate:modelValue":e[3]||(e[3]=n=>a.value=n),type:"text",placeholder:"Name",class:"w-full p-2 border border-gray-300 rounded mb-4",required:""},null,512),[[p,a.value]]),c(r("input",{"onUpdate:modelValue":e[4]||(e[4]=n=>o.value=n),type:"password",placeholder:"Password",class:"w-full p-2 border border-gray-300 rounded mb-6",required:""},null,512),[[p,o.value]]),e[8]||(e[8]=r("button",{type:"submit",class:"w-full bg-blue-500 text-white py-2 rounded hover:bg-blue-600"}," Login ",-1))],32))])]))}};export{C as default};
