import{r as b,A as g,e as w,c as p,a as e,h as y,v,f as D,F,i as A,o as i,t as r}from"./DutVACua.js";const T={class:"border-slate-200 dark:border-slate-700 text-slate-800 dark:text-slate-100"},V={class:"flex gap-4 items-end mb-4"},C={class:"bg-slate-50 dark:bg-slate-600 border-slate-200 dark:border-slate-700 text-slate-800 dark:text-slate-100 p-4 rounded shadow mb-6 space-y-6"},S={class:"min-w-full border-collapse"},P={class:"px-4 py-2 border"},R={class:"px-4 py-2 border"},U={class:"px-4 py-2 border"},I={class:"px-4 py-2 border"},L={class:"px-4 py-2 border"},j={class:"px-4 py-2 border"},z={class:"px-4 py-2 border"},B={class:"px-4 py-2 border"},E={class:"px-4 py-2 border"},N={key:0},O={__name:"transactions",setup(H){const _=b([]),n=b(""),d=b("");function l(a){return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(a||0)}const c=g(()=>_.value.filter(a=>{const s=new Date(a.date),t=n.value?new Date(n.value):null,u=d.value?new Date(d.value):null;return!(t&&s<t||u&&s>u)}));function f(){n.value="",d.value=""}function h(){const a=["Invoice #","Date","Customer","VAT Sales","VAT Amount","VAT-Exempt Sales","Zero-Rated Sales","Discount","Total"],s=c.value.map(o=>[o.invoice_number,o.date,o.customer_name,o.vat_sales,o.vat_amount,o.vat_exempt_sales,o.zero_rated_sales,o.discount,o.total]),t=[a,...s].map(o=>o.join(",")).join(`
`),u=new Blob([t],{type:"text/csv;charset=utf-8;"}),x=URL.createObjectURL(u),m=document.createElement("a");m.href=x,m.download=`invoices_${Date.now()}.csv`,m.click(),URL.revokeObjectURL(x)}async function k(){try{const a=c.value.map(t=>({id:t.id,invoice_number:t.invoice_number,date:t.date,customer_name:t.customer_name,vat_sales:t.vat_sales,vat_amount:t.vat_amount,vat_exempt_sales:t.vat_exempt_sales,zero_rated_sales:t.zero_rated_sales,discount:t.discount,total:t.total})),s=await window.electron.invoke("export-invoices-pdf",a);alert(`PDF saved at: ${s}`)}catch(a){console.error("Failed to save PDF:",a),alert("Failed to generate PDF")}}return w(async()=>{try{_.value=await window.electron.invoke("get-all-invoices")}catch(a){console.error("Failed to fetch invoices:",a)}}),(a,s)=>(i(),p("div",T,[e("div",V,[e("div",null,[s[2]||(s[2]=e("label",{class:"block text-sm font-medium"},"From",-1)),y(e("input",{type:"date","onUpdate:modelValue":s[0]||(s[0]=t=>n.value=t),class:"mt-1 border rounded px-2 py-1 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-100"},null,512),[[v,n.value]])]),e("div",null,[s[3]||(s[3]=e("label",{class:"block text-sm font-medium"},"To",-1)),y(e("input",{type:"date","onUpdate:modelValue":s[1]||(s[1]=t=>d.value=t),class:"mt-1 border rounded px-2 py-1 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-100"},null,512),[[v,d.value]])]),e("button",{onClick:f,class:"px-4 py-2 bg-gray-400 rounded"},"Clear"),e("button",{onClick:h,class:"px-4 py-2 bg-sky-400 text-white rounded"},"Save as CSV"),e("button",{onClick:k,class:"px-4 py-2 bg-orange-400 text-white rounded"},"Save as PDF")]),e("div",C,[e("table",S,[s[5]||(s[5]=e("thead",{class:"bg-slate-400"},[e("tr",null,[e("th",{class:"px-4 py-2 border"},"Invoice #"),e("th",{class:"px-4 py-2 border"},"Date"),e("th",{class:"px-4 py-2 border"},"Customer"),e("th",{class:"px-4 py-2 border"},"VAT Sales"),e("th",{class:"px-4 py-2 border"},"VAT Amount"),e("th",{class:"px-4 py-2 border"},"VAT-Exempt Sales"),e("th",{class:"px-4 py-2 border"},"Zero-Rated Sales"),e("th",{class:"px-4 py-2 border"},"Discount"),e("th",{class:"px-4 py-2 border"},"Total")])],-1)),e("tbody",null,[(i(!0),p(F,null,A(c.value,t=>(i(),p("tr",{key:t.id},[e("td",P,r(t.invoice_number),1),e("td",R,r(t.date),1),e("td",U,r(t.customer_name),1),e("td",I,r(l(t.vat_sales)),1),e("td",L,r(l(t.vat_amount)),1),e("td",j,r(l(t.vat_exempt_sales)),1),e("td",z,r(l(t.zero_rated_sales)),1),e("td",B,r(l(t.discount)),1),e("td",E,r(l(t.total)),1)]))),128)),c.value.length===0?(i(),p("tr",N,[...s[4]||(s[4]=[e("td",{class:"px-4 py-2 border text-center text-gray-500",colspan:"9"},"No invoices found",-1)])])):D("",!0)])])])]))}};export{O as default};
