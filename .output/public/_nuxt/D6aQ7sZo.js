import{r,e as x,k as y,c as u,a as t,d as m,t as p,g as w,h as v,v as b,o as d}from"#entry";const k={class:"min-h-screen bg-slate-50 py-12 px-6"},S={class:"max-w-xl mx-auto bg-sky-100 shadow rounded-lg p-8"},N={key:0},h={class:"mb-4"},_={class:"mb-4"},C={class:"flex justify-between mt-6"},D={class:"mb-4"},E={class:"mb-4"},A={__name:"profile",setup(M){const i=y(),o=r({name:"",role:""}),s=r({name:"",password:""}),l=r(!1);x(()=>{const n=localStorage.getItem("user");if(n){const e=JSON.parse(n);o.value=e,s.value.name=e.name}else i.push("/login")});function c(){if(s.value.name.trim()==="")return alert("Name required");o.value.name=s.value.name,localStorage.setItem("user",JSON.stringify(o.value)),l.value=!1,alert("Profile updated!")}function f(){s.value.name=o.value.name,s.value.password="",l.value=!1}function g(){confirm("Are you sure you want to delete your account?")&&(localStorage.removeItem("user"),alert("Account deleted."),i.push("/login"))}return(n,e)=>(d(),u("div",k,[t("div",S,[e[8]||(e[8]=t("h2",{class:"text-2xl font-bold mb-6 text-center"},"My Profile",-1)),l.value?(d(),u("form",{key:1,onSubmit:w(c,["prevent"])},[t("div",D,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium mb-1"},"Name",-1)),v(t("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>s.value.name=a),class:"w-full border px-3 py-2 rounded"},null,512),[[b,s.value.name]])]),t("div",E,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium mb-1"},"Password",-1)),v(t("input",{type:"password","onUpdate:modelValue":e[2]||(e[2]=a=>s.value.password=a),class:"w-full border px-3 py-2 rounded"},null,512),[[b,s.value.password]])]),t("div",{class:"flex justify-between mt-6"},[e[7]||(e[7]=t("button",{type:"submit",class:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600"}," Save ",-1)),t("button",{type:"button",onClick:f,class:"bg-gray-300 text-gray-800 px-4 py-2 rounded"}," Cancel ")])],32)):(d(),u("div",N,[t("p",h,[e[3]||(e[3]=t("strong",null,"Name:",-1)),m(" "+p(o.value.name),1)]),t("p",_,[e[4]||(e[4]=t("strong",null,"Role:",-1)),m(" "+p(o.value.role),1)]),t("div",C,[t("button",{onClick:e[0]||(e[0]=a=>l.value=!0),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"}," Edit "),t("button",{onClick:g,class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," Delete Account ")])]))])]))}};export{A as default};
