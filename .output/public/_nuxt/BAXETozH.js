import{r as u,A as p,e as S,c as n,a as e,f as z,h as m,v as h,p as I,t as v,g as N,F as L,i as U,o as d,b as w,n as k}from"#entry";import{c as g}from"./CCcglbIy.js";/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=g("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=g("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),q={class:"p-4"},D={class:"flex gap-2 mt-2"},$={type:"submit",class:"bg-blue-500 text-white px-3 py-1 rounded"},j={key:0,class:"text-center py-4"},H={key:1,class:"w-full border-collapse border"},Z={class:"border px-2 py-1"},G={class:"border px-2 py-1"},J={class:"border px-2 py-1"},K={class:"border px-2 py-1"},O={class:"border px-2 py-1 flex gap-2"},Q=["onClick"],W=["onClick"],X={key:2,class:"mt-4 text-center"},ae={__name:"products",setup(Y){const c=u(""),o=u(0),r=u(""),y=u([]),i=u(null),s=u(!1),_=p(()=>r.value==="vatable"?o.value:0),x=p(()=>r.value==="vatable"?o.value*.12:0),A=p(()=>r.value==="exempt"?o.value:0),P=p(()=>r.value==="zero"?o.value:0),T=p(()=>o.value+x.value);async function b(){s.value=!0;try{y.value=await window.productAPI.get(),console.log("Fetched products:",y.value)}catch(a){console.error("Error fetching products:",a),alert("Failed to fetch products.")}finally{s.value=!1}}function f(){i.value=null,c.value="",o.value=0,r.value=""}function V(a){i.value=a.id,c.value=a.productname,o.value=a.price,r.value=a.vatType}function F(){f()}async function M(){s.value=!0;const a={productname:c.value,price:o.value,vatType:r.value,vatSales:_.value,vatAmount:x.value,vatExempt:A.value,zeroRated:P.value,total:T.value,image:null};try{i.value?(a.id=i.value,await window.productAPI.update(a)):await window.productAPI.add(a),f(),await b()}catch(t){console.error("Product save error:",t),alert("Failed to save product.")}finally{s.value=!1}}async function C(a){if(confirm("Are you sure you want to delete this product?")){s.value=!0;try{await window.productAPI.delete(a),await b()}catch(t){console.error("Product delete error:",t),alert("Failed to delete product.")}finally{s.value=!1}}}return S(b),(a,t)=>(d(),n("div",q,[e("form",{onSubmit:N(M,["prevent"]),class:"mb-6 border rounded p-4 space-y-2"},[e("div",null,[t[3]||(t[3]=e("label",null,"Product Name",-1)),m(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>c.value=l),type:"text",class:"border rounded px-2 py-1 w-full",required:""},null,512),[[h,c.value]])]),e("div",null,[t[4]||(t[4]=e("label",null,"Price",-1)),m(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>o.value=l),type:"number",class:"border rounded px-2 py-1 w-full",required:""},null,512),[[h,o.value,void 0,{number:!0}]])]),e("div",null,[t[6]||(t[6]=e("label",null,"VAT Type",-1)),m(e("select",{"onUpdate:modelValue":t[2]||(t[2]=l=>r.value=l),class:"border rounded px-2 py-1 w-full"},[...t[5]||(t[5]=[e("option",{value:""},"Select",-1),e("option",{value:"vatable"},"Vatable",-1),e("option",{value:"exempt"},"Exempt",-1),e("option",{value:"zero"},"Zero Rated",-1)])],512),[[I,r.value]])]),e("div",D,[e("button",$,v(i.value?"Update":"Add"),1),e("button",{type:"button",onClick:F,class:"bg-gray-300 px-3 py-1 rounded"},"Cancel")])],32),s.value?(d(),n("div",j,"Loading products...")):(d(),n("table",H,[t[7]||(t[7]=e("thead",null,[e("tr",{class:"bg-gray-100"},[e("th",{class:"border px-2 py-1"},"Name"),e("th",{class:"border px-2 py-1"},"Price"),e("th",{class:"border px-2 py-1"},"VAT Type"),e("th",{class:"border px-2 py-1"},"Total"),e("th",{class:"border px-2 py-1"},"Actions")])],-1)),e("tbody",null,[(d(!0),n(L,null,U(y.value,l=>(d(),n("tr",{key:l.id},[e("td",Z,v(l.productname),1),e("td",G,v(l.price.toFixed(2)),1),e("td",J,v(l.vatType),1),e("td",K,v(l.total.toFixed(2)),1),e("td",O,[e("button",{onClick:E=>V(l),class:"text-blue-500"},[w(k(B))],8,Q),e("button",{onClick:E=>C(l.id),class:"text-red-500"},[w(k(R))],8,W)])]))),128))])])),!s.value&&y.value.length===0?(d(),n("p",X,"No products found.")):z("",!0)]))}};export{ae as default};
