import{r as _,m as g,e as D,c as p,a as e,h as y,v,f as F,F as k,i as T,o as i,t as r}from"#entry";const V={class:"bg-slate-50 min-h-screen p-6 space-y-6"},A={class:"flex gap-4 items-end mb-4"},C={class:"bg-white shadow rounded overflow-x-auto"},S={class:"min-w-full border-collapse"},P={class:"px-4 py-2 border"},I={class:"px-4 py-2 border"},R={class:"px-4 py-2 border"},U={class:"px-4 py-2 border"},L={class:"px-4 py-2 border"},j={class:"px-4 py-2 border"},z={class:"px-4 py-2 border"},B={class:"px-4 py-2 border"},E={class:"px-4 py-2 border"},N={key:0},O={__name:"transactions",setup(H){const b=_([]),n=_(""),d=_("");function l(o){return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(o||0)}const c=g(()=>b.value.filter(o=>{const s=new Date(o.date),t=n.value?new Date(n.value):null,u=d.value?new Date(d.value):null;return!(t&&s<t||u&&s>u)}));function f(){n.value="",d.value=""}function h(){const o=["Invoice #","Date","Customer","VAT Sales","VAT Amount","VAT-Exempt Sales","Zero-Rated Sales","Discount","Total"],s=c.value.map(a=>[a.invoice_number,a.date,a.customer_name,a.vat_sales,a.vat_amount,a.vat_exempt_sales,a.zero_rated_sales,a.discount,a.total]),t=[o,...s].map(a=>a.join(",")).join(`
`),u=new Blob([t],{type:"text/csv;charset=utf-8;"}),x=URL.createObjectURL(u),m=document.createElement("a");m.href=x,m.download=`invoices_${Date.now()}.csv`,m.click(),URL.revokeObjectURL(x)}async function w(){try{const o=c.value.map(t=>({id:t.id,invoice_number:t.invoice_number,date:t.date,customer_name:t.customer_name,vat_sales:t.vat_sales,vat_amount:t.vat_amount,vat_exempt_sales:t.vat_exempt_sales,zero_rated_sales:t.zero_rated_sales,discount:t.discount,total:t.total})),s=await window.electron.invoke("export-invoices-pdf",o);alert(`PDF saved at: ${s}`)}catch(o){console.error("Failed to save PDF:",o),alert("Failed to generate PDF")}}return D(async()=>{try{b.value=await window.electron.invoke("get-all-invoices")}catch(o){console.error("Failed to fetch invoices:",o)}}),(o,s)=>(i(),p("div",V,[s[6]||(s[6]=e("h1",{class:"text-4xl font-bold text-gray-800"},"Invoices",-1)),e("div",A,[e("div",null,[s[2]||(s[2]=e("label",{class:"block text-sm font-medium text-gray-700"},"From",-1)),y(e("input",{type:"date","onUpdate:modelValue":s[0]||(s[0]=t=>n.value=t),class:"mt-1 border rounded px-2 py-1"},null,512),[[v,n.value]])]),e("div",null,[s[3]||(s[3]=e("label",{class:"block text-sm font-medium text-gray-700"},"To",-1)),y(e("input",{type:"date","onUpdate:modelValue":s[1]||(s[1]=t=>d.value=t),class:"mt-1 border rounded px-2 py-1"},null,512),[[v,d.value]])]),e("button",{onClick:f,class:"px-4 py-2 bg-gray-300 rounded"},"Clear"),e("button",{onClick:h,class:"px-4 py-2 bg-blue-500 text-white rounded"},"Save as CSV"),e("button",{onClick:w,class:"px-4 py-2 bg-red-500 text-white rounded"},"Save as PDF")]),e("div",C,[e("table",S,[s[5]||(s[5]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{class:"px-4 py-2 border"},"Invoice #"),e("th",{class:"px-4 py-2 border"},"Date"),e("th",{class:"px-4 py-2 border"},"Customer"),e("th",{class:"px-4 py-2 border"},"VAT Sales"),e("th",{class:"px-4 py-2 border"},"VAT Amount"),e("th",{class:"px-4 py-2 border"},"VAT-Exempt Sales"),e("th",{class:"px-4 py-2 border"},"Zero-Rated Sales"),e("th",{class:"px-4 py-2 border"},"Discount"),e("th",{class:"px-4 py-2 border"},"Total")])],-1)),e("tbody",null,[(i(!0),p(k,null,T(c.value,t=>(i(),p("tr",{key:t.id},[e("td",P,r(t.invoice_number),1),e("td",I,r(t.date),1),e("td",R,r(t.customer_name),1),e("td",U,r(l(t.vat_sales)),1),e("td",L,r(l(t.vat_amount)),1),e("td",j,r(l(t.vat_exempt_sales)),1),e("td",z,r(l(t.zero_rated_sales)),1),e("td",B,r(l(t.discount)),1),e("td",E,r(l(t.total)),1)]))),128)),c.value.length===0?(i(),p("tr",N,[...s[4]||(s[4]=[e("td",{class:"px-4 py-2 border text-center text-gray-500",colspan:"9"},"No invoices found",-1)])])):F("",!0)])])])]))}};export{O as default};
