import{r as o,e as f,s as g,c as r,a as t,d as i,t as m,g as y,h as k,v as w,o as u}from"#entry";const h={class:"min-h-screen bg-slate-50 dark:bg-slate-800 py-12 px-6"},N={class:"max-w-xl mx-auto bg-white dark:bg-slate-700 shadow rounded-lg p-8"},S={key:0},_={class:"mb-4 text-slate-800 dark:text-slate-100"},C={class:"mb-4 text-slate-800 dark:text-slate-100"},E={class:"mb-4"},M={__name:"profile",setup(A){const d=g(),a=o({name:"",role:""}),l=o(!1),s=o({name:""});f(()=>{const n=localStorage.getItem("user");if(!n){d.push("/");return}const e=JSON.parse(n);a.value=e,s.value.name=e.name});function c(){l.value=!0}function p(){l.value=!1,s.value.name=a.value.name}async function b(){if(!s.value.name.trim()){alert("Name cannot be empty");return}if(!(await window.electronAPI.updateName({oldName:a.value.name,newName:s.value.name})).success){alert("Failed to update name");return}a.value.name=s.value.name,localStorage.setItem("user",JSON.stringify(a.value)),l.value=!1,alert("Name updated successfully!")}function v(){confirm("Are you sure?")&&(localStorage.removeItem("user"),d.push("/"))}return(n,e)=>(u(),r("div",h,[t("div",N,[e[5]||(e[5]=t("h2",{class:"text-2xl font-bold mb-6 text-center text-slate-800 dark:text-slate-100"}," My Profile ",-1)),l.value?(u(),r("form",{key:1,onSubmit:y(b,["prevent"])},[t("div",E,[e[3]||(e[3]=t("label",{class:"block mb-1 font-medium"},"Name",-1)),k(t("input",{"onUpdate:modelValue":e[0]||(e[0]=x=>s.value.name=x),class:"w-full border px-3 py-2 rounded bg-white dark:bg-slate-600 text-black dark:text-white"},null,512),[[w,s.value.name]])]),t("div",{class:"flex justify-between mt-6"},[e[4]||(e[4]=t("button",{type:"submit",class:"bg-green-600 px-4 py-2 rounded text-white hover:bg-green-700"}," Save ",-1)),t("button",{type:"button",onClick:p,class:"bg-gray-300 dark:bg-slate-500 px-4 py-2 rounded text-black dark:text-white"}," Cancel ")])],32)):(u(),r("div",S,[t("p",_,[e[1]||(e[1]=t("strong",null,"Name:",-1)),i(" "+m(a.value.name),1)]),t("p",C,[e[2]||(e[2]=t("strong",null,"Role:",-1)),i(" "+m(a.value.role),1)]),t("div",{class:"flex justify-between mt-6"},[t("button",{onClick:c,class:"bg-sky-500 px-4 py-2 rounded text-white hover:bg-sky-600"}," Edit "),t("button",{onClick:v,class:"bg-red-500 px-4 py-2 rounded text-white hover:bg-red-600"}," Delete Account ")])]))])]))}};export{M as default};
