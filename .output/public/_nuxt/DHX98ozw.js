import{r as b,m as w,e as g,c as u,a as t,h as _,v,f as k,F as A,i as D,o as p,t as a}from"./_qwiZnX4.js";const T={class:"bg-slate-50 min-h-screen p-6 space-y-6"},V={class:"flex gap-4 items-end mb-4"},C={class:"bg-white shadow rounded overflow-x-auto"},S={class:"min-w-full border-collapse"},F={class:"px-4 py-2 border"},R={class:"px-4 py-2 border"},U={class:"px-4 py-2 border"},I={class:"px-4 py-2 border"},L={class:"px-4 py-2 border"},j={class:"px-4 py-2 border"},B={class:"px-4 py-2 border"},E={class:"px-4 py-2 border"},N={class:"px-4 py-2 border"},P={key:0},M={__name:"transactions",setup(z){const x=b([]),n=b(""),d=b("");function l(r){return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(r||0)}const i=w(()=>x.value.filter(r=>{const e=new Date(r.date),s=n.value?new Date(n.value):null,c=d.value?new Date(d.value):null;return!(s&&e<s||c&&e>c)}));function f(){n.value="",d.value=""}function h(){const r=["Invoice #","Date","Customer","VAT Sales","VAT Amount","VAT-Exempt Sales","Zero-Rated Sales","Discount","Total"],e=i.value.map(o=>[o.invoice_number,o.date,o.customer_name,o.vat_sales,o.vat_amount,o.vat_exempt_sales,o.zero_rated_sales,o.discount,o.total]),s=[r,...e].map(o=>o.join(",")).join(`
`),c=new Blob([s],{type:"text/csv;charset=utf-8;"}),y=URL.createObjectURL(c),m=document.createElement("a");m.setAttribute("href",y),m.setAttribute("download",`invoices_${Date.now()}.csv`),m.click(),URL.revokeObjectURL(y)}return g(async()=>{try{x.value=await window.electron.invoke("get-all-invoices")}catch(r){console.error("Failed to fetch invoices:",r)}}),(r,e)=>(p(),u("div",T,[e[6]||(e[6]=t("h1",{class:"text-4xl font-bold text-gray-800"},"Invoices",-1)),t("div",V,[t("div",null,[e[2]||(e[2]=t("label",{class:"block text-sm font-medium text-gray-700"},"From",-1)),_(t("input",{type:"date","onUpdate:modelValue":e[0]||(e[0]=s=>n.value=s),class:"mt-1 border rounded px-2 py-1"},null,512),[[v,n.value]])]),t("div",null,[e[3]||(e[3]=t("label",{class:"block text-sm font-medium text-gray-700"},"To",-1)),_(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=s=>d.value=s),class:"mt-1 border rounded px-2 py-1"},null,512),[[v,d.value]])]),t("button",{onClick:f,class:"px-4 py-2 bg-gray-300 rounded"},"Clear"),t("button",{onClick:h,class:"px-4 py-2 bg-blue-500 text-white rounded"},"Save as CSV")]),t("div",C,[t("table",S,[e[5]||(e[5]=t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{class:"px-4 py-2 border"},"Invoice #"),t("th",{class:"px-4 py-2 border"},"Date"),t("th",{class:"px-4 py-2 border"},"Customer"),t("th",{class:"px-4 py-2 border"},"VAT Sales"),t("th",{class:"px-4 py-2 border"},"VAT Amount"),t("th",{class:"px-4 py-2 border"},"VAT-Exempt Sales"),t("th",{class:"px-4 py-2 border"},"Zero-Rated Sales"),t("th",{class:"px-4 py-2 border"},"Discount"),t("th",{class:"px-4 py-2 border"},"Total")])],-1)),t("tbody",null,[(p(!0),u(A,null,D(i.value,s=>(p(),u("tr",{key:s.id},[t("td",F,a(s.invoice_number),1),t("td",R,a(s.date),1),t("td",U,a(s.customer_name),1),t("td",I,a(l(s.vat_sales)),1),t("td",L,a(l(s.vat_amount)),1),t("td",j,a(l(s.vat_exempt_sales)),1),t("td",B,a(l(s.zero_rated_sales)),1),t("td",E,a(l(s.discount)),1),t("td",N,a(l(s.total)),1)]))),128)),i.value.length===0?(p(),u("tr",P,e[4]||(e[4]=[t("td",{class:"px-4 py-2 border text-center text-gray-500",colspan:"9"},"No invoices found",-1)]))):k("",!0)])])])]))}};export{M as default};
